# 抽象工厂模式

**定义:**  提供一个创建一系列相关或相互依赖对象的接口，而无需指定它们具体的类。

**类型:** 创建型模式。

**角色及其职责:**

​		1、 抽象工厂角色（Creator）：抽象工厂模式的核心，包含对多个产品结构的声名，任何工厂类都必须实现这个接口。

​		2、 具体工厂角色（Concrete Creator）：具体工厂类是抽象工厂类的一个实现，负责实例化某个产品族中的产品对象。

​		3、 抽象产品角色（Product）：抽象工厂模式所创建的所有对象的父类，它负责描述所有实例所共有的公共接口。

​		4、 具体产品角色（Concrete Product）：抽象工厂模式所创建的具体实例对象。

**相关概念:** 

​		产品等级结构：产品等级结构即产品的继承结构，如一个抽象类是空调，其子类有海尔空调、美的空调、奥克斯空调，则抽象空调与具体品牌的空调之间构成了一个产品等级结构，抽象空调是父类，而具体品牌的空调是其子类。

​		产品族：产品族是指由同一个工厂生产的，位于不同产品等级结构中的一组产品，如海尔电器工厂生产的海尔空调、海尔电冰箱，海尔空调位于空调产品等级结构中，海尔电冰箱位于电冰箱产品等级结构中，海尔空调、海尔电冰箱构成了一个产品族。

**适用场景:**

​		客户端（应用层）不依赖于产品类实例如何被创建、实现等细节。

​		提供一个产品类的库，所有产品以同样的接口出现，从而使客户端不依赖于具体的实现。

**优点:** 

​		易于交换产品族。只需要切换工厂，就可以使用不同的产品族所有产品。

​		具体的产品在客户端（应用层）代码隔离，客户端（应用层）通过它们的抽象接口操纵实例。

**缺点:** 在产品族中扩展新的产品困难，需要修改抽象接口。



**源码举例：**

​	JDK：

​	抽象工厂角色：java.sql.Connection

​	具体工厂角色：com.mysql.cj.jdbc.ConnectionImpl

​	抽象产品角色：java.sql.Statement

​	具体产品角色：com.mysql.cj.jdbc.StatementImpl

​	Mybatis：

​	抽象工厂角色：org.apache.ibatis.session.SqlSessionFactory

​	具体工厂角色：org.apache.ibatis.session.defaults.DefaultSqlSessionFactory

​	抽象产品角色：org.apache.ibatis.session.SqlSession

​	具体产品角色：org.apache.ibatis.session.defaults.DefaultSqlSession